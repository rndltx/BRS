(()=>{var e={};e.id=405,e.ids=[405],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},67217:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=r(70260),i=r(28203),s=r(25155),o=r.n(s),n=r(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["admin",{children:["slideshow",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54619)),"C:\\Users\\Khairunnisa\\OneDrive\\Dokumen\\saufi\\app\\admin\\slideshow\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,54899)),"C:\\Users\\Khairunnisa\\OneDrive\\Dokumen\\saufi\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"C:\\Users\\Khairunnisa\\OneDrive\\Dokumen\\saufi\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Khairunnisa\\OneDrive\\Dokumen\\saufi\\app\\admin\\slideshow\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/slideshow/page",pathname:"/admin/slideshow",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6018:(e,t,r)=>{Promise.resolve().then(r.bind(r,54619))},24170:(e,t,r)=>{Promise.resolve().then(r.bind(r,68070))},68070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(45512),i=r(58009),s=r(5868),o=r(45103);let n=(0,r(73258).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var l=r(49656),d=r(55744),c=r(43517),u=r(87938);let p=(0,d.r)(function(){let[e,t]=(0,i.useState)([]),[r,d]=(0,i.useState)(!0),[p,h]=(0,i.useState)(!1),m=(0,i.useRef)(null),{toast:v}=(0,u.d)(),x=(0,i.useCallback)(async()=>{try{let e=await fetch("/api/slideshow");if(!e.ok)throw Error("Failed to fetch images");let r=await e.json();t(r),d(!1)}catch(e){console.error("Error fetching images:",e),v({title:"Error",description:"Failed to fetch images. Please try again.",variant:"destructive"}),d(!1)}},[v]),g=async e=>{let t=e.target.files?.[0];if(!t)return;h(!0);let r=new FormData;r.append("image",t);try{if(!(await fetch("/api/slideshow",{method:"POST",body:r})).ok)throw Error("Failed to upload image");v({title:"Success",description:"Image uploaded successfully"}),x()}catch(e){v({title:"Error",description:"Failed to upload image",variant:"destructive"})}finally{h(!1),m.current&&(m.current.value="")}},f=async e=>{try{if(!(await fetch(`/api/slideshow/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete image");v({title:"Success",description:"Image deleted successfully"}),x()}catch(e){v({title:"Error",description:"Failed to delete image",variant:"destructive"})}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Manage Slideshow Images"}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(c.$,{onClick:()=>{m.current?.click()},disabled:p,className:"relative",children:[(0,a.jsx)(n,{className:"mr-2 h-4 w-4"}),p?"Uploading...":"Upload New Image"]}),(0,a.jsx)("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:g})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>(0,a.jsx)(s.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative group",children:(0,a.jsxs)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg shadow-md",children:[(0,a.jsx)(o.default,{src:e.image_url,alt:`Slideshow image ${e.id}`,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",priority:0===t,className:"object-cover transition-transform duration-300 group-hover:scale-105"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),(0,a.jsx)(c.$,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:()=>f(e.id),children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})]})},e.id))})]})})},43517:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var a=r(45512),i=r(7702);function s({className:e,variant:t="default",...r}){return(0,a.jsx)("button",{className:(0,i.cn)("px-4 py-2 rounded-lg font-medium transition-all duration-200",{"bg-blue-500 hover:bg-blue-600 text-white":"default"===t,"bg-red-500 hover:bg-red-600 text-white":"destructive"===t,"border border-gray-300 hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-800":"outline"===t},e),...r})}r(58009)},87938:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var a=r(58009);function i(){let[,e]=(0,a.useState)([]);return{toast:({title:t,description:r,variant:a="default"})=>{e(e=>[...e,{title:t,description:r,variant:a}]),console.log(`Toast: ${t} - ${r} (${a})`)}}}},7702:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(82281),i=r(94805);function s(...e){return(0,i.QP)((0,a.$)(e))}},49656:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},54619:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Khairunnisa\\\\OneDrive\\\\Dokumen\\\\saufi\\\\app\\\\admin\\\\slideshow\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Khairunnisa\\OneDrive\\Dokumen\\saufi\\app\\admin\\slideshow\\page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[989,336,298,821,103,889],()=>r(67217));module.exports=a})();